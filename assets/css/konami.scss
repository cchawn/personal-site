/* See https://github.com/jkneb/street-fighter-css for original */

@mixin anim($animName, $steps, $animNbr, $animParams){
  .#{$animName} { 
    @content;
    animation:$animName steps($steps) $animParams; 
  }
  @keyframes #{$animName} {
    from { background-position:0px (-$spriteHeight * ($animNbr - 1)); }
    to { background-position:-($spriteWidth * $steps) (-$spriteHeight * ($animNbr - 1)); }
  }
}

/* sprite tile dimensions */
$spriteWidth:70px;
$spriteHeight:80px;

.ken {
  position:absolute; bottom:0;
  width:$spriteWidth; height:$spriteHeight; 
  background-image:url('http://front-back.com/wp-content/uploads/2013/01/ken.png'); 
}

@include anim($animName:fireball, $steps:2, $animNbr:5, $animParams:.15s infinite) {
  @extend .ken;
  position:absolute; left:100%; bottom:0px;
  margin-left:0; /* default margin-left */
  background-position:140px 320px; /* default background position */
  transition:margin 8s linear; 
  &:before { left:25px; right:25px; }
  &.moving { margin-left:4000px; } /* triggering the movement with this class */
}
@include anim($animName:explode, $steps:4, $animNbr:6, $animParams:.5s 1);
@include anim($animName:stance, $steps:4, $animNbr:2, $animParams:.5s infinite);
@include anim($animName:hadoken, $steps:4, $animNbr:1, $animParams:.5s infinite);

.stage {
  position:absolute; top:50%;
  width:60px; height:100px;
  transform: translateY(-50%);
}